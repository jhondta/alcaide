import Config

config :alcaide,
  # Application name (must match your mix.exs :app)
  app: :my_app,

  # Target server
  server: [
    host: "192.168.1.100",
    user: "deploy",
    port: 22
  ],

  # Public domain — Caddy will auto-provision TLS via Let's Encrypt.
  # If omitted or nil, Caddy serves on :80 (HTTP-only, useful for staging).
  domain: "myapp.example.com",

  # Application jail configuration
  app_jail: [
    # Base directory on the server where jails will live
    base_path: "/jails",
    # FreeBSD version for the base system template
    freebsd_version: "15.0-RELEASE",
    # Internal port exposed by Phoenix
    port: 4000
  ],

  # Auxiliary services (each runs in its own persistent jail).
  # Remove or comment out this section if your app doesn't need a database.
  # The database jail gets IP 10.0.0.4 on the lo1 interface.
  accessories: [
    db: [
      type: :postgresql,
      version: "18",
      # Host path : Jail path — data persists on the host via nullfs
      volume: "/data/postgres:/var/db/postgresql",
      port: 5432
    ]
  ],

  # Environment variables injected into the application jail.
  # Non-secret values go here. Secret values (SECRET_KEY_BASE, DATABASE_URL
  # with credentials, etc.) should go in deploy.secrets.exs (encrypted).
  #
  # To set up encrypted secrets:
  #   alcaide secrets init    # generates master key + encrypted secrets file
  #   alcaide secrets edit    # decrypt, edit in $EDITOR, re-encrypt
  #
  # Secrets override values defined here when both have the same key.
  env: [
    PHX_HOST: "myapp.example.com",
    PORT: "4000"
  ]
